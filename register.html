<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Cadastro</title>
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/register.css">
</head>
<body>

<main class="form-wrapper">
  <div class="form-box">
    <h2>Crie a sua conta. É grátis!</h2>
    <form action="#" method="post" class="form">
      <fieldset class="fieldset">
        <legend class="fieldset-legend">Escolha o tipo da sua conta</legend>
        <div class="radio-group">
          <label>
            <input type="radio" name="tipo_conta" value="pf" checked>
            <span>Pessoa Física</span>
          </label>
          <label>
            <input type="radio" name="tipo_conta" value="pj">
            <span>Pessoa Jurídica</span>
          </label>
        </div>
      </fieldset>

      <label class="sr-only">Nome completo</label>
      <input type="text" name="nome" placeholder="Nome completo" required>

      <label class="sr-only">Como prefere ser chamado</label>
      <input type="text" name="nome_preferido" placeholder="Como prefere ser chamado (ex: João, Maria)" >

      <div class="form-row cpf-row" id="cpfRow">
        <label class="sr-only">CPF</label>
        <input type="text" id="cpfInput" name="cpf" placeholder="CPF" maxlength="14">
      </div>

      <div class="form-row cnpj-row" id="cnpjRow" style="display:none">
        <label class="sr-only">CNPJ</label>
        <input type="text" id="cnpjInput" name="cnpj" placeholder="CNPJ" maxlength="18">
      </div>

      <div class="form-row date-row" id="dateRow">
        <label class="sr-only">Data de nascimento</label>
        <input type="date" id="dataNascimento" name="data_nascimento" placeholder="Data de nascimento">
      </div>

      <label class="sr-only">E-mail</label>
      <input type="email" name="email" placeholder="E-mail" required>

      <label class="sr-only">Senha</label>
      <input type="password" name="senha" placeholder="Senha (mín. 6 caracteres)" required>

      <label class="sr-only">Confirmar senha</label>
      <input type="password" name="confirmar_senha" placeholder="Confirmar senha" required>

      <div class="actions">
        <button type="submit" class="btn">Cadastrar</button>
        <a href="login.html" class="btn btn-secondary">Voltar</a>
      </div>
      <div class="consent">
        <p class="consent-text">Ao continuar, você concorda com os <a href="terms.html">Termos de Uso</a> e a <a href="privacy.html">Política de Privacidade</a> da Valorize e seus parceiros.</p>
        <label class="consent-agree"><input type="checkbox" id="agreeTerms" name="agree_terms" required> Eu concordo com os Termos de Uso e a Política de Privacidade</label>
        <label class="consent-opt"><input type="checkbox" name="opt_in" value="1" checked> Desejo receber comunicações da Valorize</label>
        <div class="field-error" id="agreeError" style="display:none;color:#b91c1c;font-size:13px;margin-top:6px;">Você precisa concordar com os Termos e a Política de Privacidade para continuar.</div>
      </div>
    </form>
  </div>
</main>
  <div id="register-message" class="login-message" aria-live="polite" style="margin:12px 0;text-align:center"></div>

    <script>
  (function(){
    // Validação do checkbox de concordância antes do envio
    const form = document.querySelector('form.form');
    const agree = document.getElementById('agreeTerms');
    const agreeError = document.getElementById('agreeError');
    if (form) {
      form.addEventListener('submit', function(e){
        if (!agree.checked) {
          e.preventDefault();
          agreeError.style.display = 'block';
          agree.focus();
          return false;
        }
      });
    }
    const radios = document.querySelectorAll('input[name="tipo_conta"]');
    const dateRow = document.getElementById('dateRow');
    const dateInput = document.getElementById('dataNascimento');
    const cpfRow = document.getElementById('cpfRow');
    const cnpjRow = document.getElementById('cnpjRow');
    const cpfInput = document.getElementById('cpfInput');
    const cnpjInput = document.getElementById('cnpjInput');
    function update() {
      const sel = document.querySelector('input[name="tipo_conta"]:checked');
      const val = sel ? sel.value : 'pf';
      if (val === 'pf') {
        dateRow.style.display = '';
        cpfRow.style.display = '';
        cnpjRow.style.display = 'none';
        dateInput.required = true;
        cpfInput.required = true;
        cnpjInput.required = false;
      } else {
        dateRow.style.display = 'none';
        cpfRow.style.display = 'none';
        cnpjRow.style.display = '';
        dateInput.required = false;
        cpfInput.required = false;
        cnpjInput.required = true;
      }
    }
    radios.forEach(r => r.addEventListener('change', update));
    document.addEventListener('DOMContentLoaded', update);
    update();
  })();
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="js/register.js"></script>

</body>
</html>
